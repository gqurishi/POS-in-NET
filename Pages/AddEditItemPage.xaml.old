<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="POS_in_NET.Pages.AddEditItemPage"
             Title="Add/Edit Item"
             BackgroundColor="#F1F5F9">

    <Grid RowDefinitions="Auto,*,Auto">
        
        <!-- Modern Header -->
        <Border Grid.Row="0" 
                BackgroundColor="White"
                StrokeThickness="0"
                Padding="0">
            <Border.Shadow>
                <Shadow Brush="Black" Offset="0,2" Radius="10" Opacity="0.05" />
            </Border.Shadow>
            
            <VerticalStackLayout Padding="24,20" Spacing="8">
                <Label x:Name="PageTitle"
                       Text="Add New Item"
                       FontSize="26"
                       FontAttributes="Bold"
                       TextColor="#0F172A" />
                <Label Text="Fill in the details below to create a new menu item"
                       FontSize="14"
                       TextColor="#64748B" />
            </VerticalStackLayout>
        </Border>

        <!-- Scrollable Content -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="20" Spacing="20">

                <!-- Basic Information Card -->
                <Border BackgroundColor="White"
                        StrokeThickness="0"
                        StrokeShape="RoundRectangle 16"
                        Padding="0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,1" Radius="8" Opacity="0.06" />
                    </Border.Shadow>
                    
                    <VerticalStackLayout Spacing="0">
                        <!-- Card Header -->
                        <Grid BackgroundColor="#F8FAFC" 
                              Padding="24,18"
                              ColumnDefinitions="*,Auto">
                            <Label Grid.Column="0"
                                   Text="BASIC INFORMATION"
                                   FontSize="13"
                                   FontAttributes="Bold"
                                   TextColor="#475569"
                                   LetterSpacing="0.8"
                                   VerticalOptions="Center" />
                            <BoxView Grid.Column="1"
                                     WidthRequest="4"
                                     HeightRequest="20"
                                     CornerRadius="2"
                                     BackgroundColor="#10B981"
                                     VerticalOptions="Center" />
                        </Grid>
                        
                        <!-- Card Content -->
                        <VerticalStackLayout Padding="24,20" Spacing="20">

                            <!-- Item Name -->
                            <VerticalStackLayout Spacing="10">
                                <Label Text="Item Name *"
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       TextColor="#334155" />
                                <Border BackgroundColor="#F8FAFC"
                                        StrokeThickness="1"
                                        Stroke="#E2E8F0"
                                        StrokeShape="RoundRectangle 10"
                                        Padding="0">
                                    <Entry x:Name="ItemNameEntry"
                                           Placeholder="e.g., Margherita Pizza"
                                           FontSize="15"
                                           TextColor="#0F172A"
                                           PlaceholderColor="#94A3B8"
                                           BackgroundColor="Transparent"
                                           MaxLength="50"
                                           Margin="14,10"
                                           TextChanged="OnItemNameChanged" />
                                </Border>
                                <Label x:Name="ItemNameCountLabel"
                                       Text="0/50"
                                       FontSize="11"
                                       TextColor="#94A3B8"
                                       HorizontalOptions="End" />
                            </VerticalStackLayout>

                            <!-- Category -->
                            <VerticalStackLayout Spacing="10">
                                <Label Text="Category *"
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       TextColor="#334155" />
                                <Border BackgroundColor="#F8FAFC"
                                        StrokeThickness="1"
                                        Stroke="#E2E8F0"
                                        StrokeShape="RoundRectangle 10"
                                        Padding="0">
                                    <Picker x:Name="CategoryPicker"
                                            Title="Select Category"
                                            FontSize="15"
                                            TextColor="#0F172A"
                                            TitleColor="#94A3B8"
                                            BackgroundColor="Transparent"
                                            Margin="14,0"
                                            SelectedIndexChanged="OnCategoryChanged" />
                                </Border>
                            </VerticalStackLayout>

                            <!-- Sub-Category -->
                            <VerticalStackLayout Spacing="10"
                                               x:Name="SubCategorySection"
                                               IsVisible="False">
                                <Label Text="Sub-Category"
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       TextColor="#334155" />
                                <Border BackgroundColor="#F8FAFC"
                                        StrokeThickness="1"
                                        Stroke="#E2E8F0"
                                        StrokeShape="RoundRectangle 10"
                                        Padding="0">
                                    <Picker x:Name="SubCategoryPicker"
                                            Title="Select Sub-Category"
                                            FontSize="15"
                                            TextColor="#0F172A"
                                            TitleColor="#94A3B8"
                                            BackgroundColor="Transparent"
                                            Margin="14,0" />
                                </Border>
                            </VerticalStackLayout>

                            <!-- Color Picker -->
                            <VerticalStackLayout Spacing="10">
                                <Label Text="Color"
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       TextColor="#334155" />
                                <Grid ColumnDefinitions="*,Auto" 
                                      ColumnSpacing="12">
                                    <!-- Color Swatches -->
                                    <HorizontalStackLayout Grid.Column="0" Spacing="10">
                                        <Frame x:Name="Color1"
                                               BackgroundColor="#EF4444"
                                               WidthRequest="44"
                                               HeightRequest="44"
                                               CornerRadius="22"
                                               Padding="0"
                                               HasShadow="True"
                                               BorderColor="#E2E8F0">
                                            <Frame.GestureRecognizers>
                                                <TapGestureRecognizer Tapped="OnColorSelected" />
                                            </Frame.GestureRecognizers>
                                        </Frame>
                                        <Frame x:Name="Color2"
                                               BackgroundColor="#F59E0B"
                                               WidthRequest="44"
                                               HeightRequest="44"
                                               CornerRadius="22"
                                               Padding="0"
                                               HasShadow="True"
                                               BorderColor="#E2E8F0">
                                            <Frame.GestureRecognizers>
                                                <TapGestureRecognizer Tapped="OnColorSelected" />
                                            </Frame.GestureRecognizers>
                                        </Frame>
                            <Frame x:Name="Color3"
                                   BackgroundColor="#10B981"
                                   WidthRequest="40"
                                   HeightRequest="40"
                                   CornerRadius="20"
                                   Padding="0"
                                   HasShadow="False"
                                   BorderColor="Transparent">
                                <Frame.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnColorSelected" />
                                </Frame.GestureRecognizers>
                            </Frame>
                            <Frame x:Name="Color4"
                                   BackgroundColor="#3B82F6"
                                   WidthRequest="40"
                                   HeightRequest="40"
                                   CornerRadius="20"
                                   Padding="0"
                                   HasShadow="False"
                                   BorderColor="Transparent">
                                <Frame.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnColorSelected" />
                                </Frame.GestureRecognizers>
                            </Frame>
                            <Frame x:Name="Color5"
                                   BackgroundColor="#8B5CF6"
                                   WidthRequest="40"
                                   HeightRequest="40"
                                   CornerRadius="20"
                                   Padding="0"
                                   HasShadow="False"
                                   BorderColor="Transparent">
                                <Frame.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnColorSelected" />
                                </Frame.GestureRecognizers>
                            </Frame>
                            <Frame x:Name="Color6"
                                   BackgroundColor="#EC4899"
                                   WidthRequest="40"
                                   HeightRequest="40"
                                   CornerRadius="20"
                                   Padding="0"
                                   HasShadow="False"
                                   BorderColor="Transparent">
                                <Frame.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnColorSelected" />
                                </Frame.GestureRecognizers>
                            </Frame>
                            
                            <Entry x:Name="CustomColorEntry"
                                   Placeholder="#FF5733"
                                   FontSize="14"
                                   WidthRequest="100"
                                   TextColor="#1E293B"
                                   PlaceholderColor="#94A3B8"
                                   MaxLength="7"
                                   TextChanged="OnCustomColorChanged" />
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Pricing Section -->
            <Frame BackgroundColor="White"
                   BorderColor="#E2E8F0"
                   CornerRadius="12"
                   Padding="20"
                   HasShadow="False">
                <VerticalStackLayout Spacing="16">
                    <Label Text="ðŸ’° PRICING"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="#64748B" />
                    
                    <BoxView HeightRequest="1"
                             BackgroundColor="#E2E8F0" />

                    <VerticalStackLayout Spacing="8">
                        <Label Text="Price *"
                               FontSize="14"
                               TextColor="#475569" />
                        <HorizontalStackLayout Spacing="8">
                            <Label Text="Â£"
                                   FontSize="20"
                                   FontAttributes="Bold"
                                   TextColor="#1E293B"
                                   VerticalOptions="Center" />
                            <Entry x:Name="PriceEntry"
                                   Placeholder="0.00"
                                   Keyboard="Numeric"
                                   FontSize="20"
                                   TextColor="#1E293B"
                                   PlaceholderColor="#94A3B8"
                                   HorizontalOptions="FillAndExpand" />
                        </HorizontalStackLayout>
                        <Label Text="ðŸ’¡ Price includes 20% VAT"
                               FontSize="12"
                               TextColor="#64748B" />
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Addons Section -->
            <Frame BackgroundColor="White"
                   BorderColor="#E2E8F0"
                   CornerRadius="12"
                   Padding="20"
                   HasShadow="False">
                <VerticalStackLayout Spacing="16">
                    <Label Text="âž• ADDONS (Optional)"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="#64748B" />
                    
                    <BoxView HeightRequest="1"
                             BackgroundColor="#E2E8F0" />

                    <VerticalStackLayout x:Name="AddonsContainer"
                                       Spacing="8">
                        <!-- Dynamic addon cards will be added here -->
                    </VerticalStackLayout>

                    <Label x:Name="AddonsEmptyState"
                           Text="No addons yet. Click + to add optional extras"
                           FontSize="14"
                           TextColor="#94A3B8"
                           HorizontalOptions="Center"
                           Margin="0,8" />

                    <Button Text="+ Add Addon"
                            BackgroundColor="#10B981"
                            TextColor="White"
                            FontSize="14"
                            FontAttributes="Bold"
                            CornerRadius="8"
                            HeightRequest="44"
                            Clicked="OnAddAddonClicked" />
                </VerticalStackLayout>
            </Frame>

            <!-- Settings Section -->
            <Frame BackgroundColor="White"
                   BorderColor="#E2E8F0"
                   CornerRadius="12"
                   Padding="20"
                   HasShadow="False">
                <VerticalStackLayout Spacing="16">
                    <Label Text="âš™ï¸ SETTINGS"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="#64748B" />
                    
                    <BoxView HeightRequest="1"
                             BackgroundColor="#E2E8F0" />

                    <VerticalStackLayout Spacing="8">
                        <Label Text="Note"
                               FontSize="14"
                               TextColor="#475569" />
                        <Picker x:Name="NotePicker"
                               Title="Select Note"
                               FontSize="16"
                               TextColor="#1E293B"
                               TitleColor="#64748B" />
                    </VerticalStackLayout>

                    <VerticalStackLayout Spacing="8">
                        <Label Text="Print Group"
                               FontSize="14"
                               TextColor="#475569" />
                        <Picker x:Name="PrintGroupPicker"
                               Title="Select Print Group"
                               FontSize="16"
                               TextColor="#1E293B"
                               TitleColor="#64748B" />
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Action Buttons -->
            <HorizontalStackLayout Spacing="12"
                                 HorizontalOptions="FillAndExpand">
                <Button Text="Cancel"
                        BackgroundColor="Transparent"
                        TextColor="#64748B"
                        BorderColor="#E2E8F0"
                        BorderWidth="2"
                        FontSize="16"
                        FontAttributes="Bold"
                        CornerRadius="8"
                        HeightRequest="50"
                        HorizontalOptions="FillAndExpand"
                        Clicked="OnCancelClicked" />
                
                <Button x:Name="SaveButton"
                        Text="Save Item"
                        BackgroundColor="#10B981"
                        TextColor="White"
                        FontSize="16"
                        FontAttributes="Bold"
                        CornerRadius="8"
                        HeightRequest="50"
                        HorizontalOptions="FillAndExpand"
                        Clicked="OnSaveClicked" />
            </HorizontalStackLayout>

            <BoxView HeightRequest="20"
                     BackgroundColor="Transparent" />
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
