<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="POS_in_NET.Views.DiscountDialog"
             BackgroundColor="Transparent"
             HorizontalOptions="Fill"
             VerticalOptions="Fill">
    
    <Grid HorizontalOptions="Fill" VerticalOptions="Fill">
        
        <!-- Dark Overlay Background -->
        <BoxView HorizontalOptions="Fill"
                 VerticalOptions="Fill"
                 Color="#000000"
                 Opacity="0.5">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnCancelClicked"/>
            </BoxView.GestureRecognizers>
        </BoxView>
        
        <!-- Dialog Container - Centered -->
        <Frame BackgroundColor="White"
               BorderColor="#DDDDDD"
               CornerRadius="10"
               HasShadow="True"
               Padding="25"
               WidthRequest="500"
               HorizontalOptions="Center"
               VerticalOptions="Center">
            
            <VerticalStackLayout Spacing="15">
                
                <!-- Header Row -->
                <Grid ColumnDefinitions="*,Auto">
                    <Label Text="Apply Discount"
                           FontSize="20"
                           FontAttributes="Bold"
                           TextColor="#333333"
                           VerticalOptions="Center"/>
                    <Button Grid.Column="1"
                            Text="X"
                            BackgroundColor="#DD4444"
                            TextColor="White"
                            FontSize="14"
                            FontAttributes="Bold"
                            WidthRequest="40"
                            HeightRequest="40"
                            CornerRadius="20"
                            Clicked="OnCancelClicked"/>
                </Grid>
                
                <!-- Separator -->
                <BoxView HeightRequest="1" Color="#EEEEEE"/>
                
                <!-- Subtotal Display -->
                <Frame BackgroundColor="#F8F8F8" BorderColor="#DDDDDD" CornerRadius="8" Padding="15" HasShadow="False">
                    <HorizontalStackLayout HorizontalOptions="Center" Spacing="10">
                        <Label Text="Subtotal:"
                               FontSize="16"
                               TextColor="#666666"
                               VerticalOptions="Center"/>
                        <Label x:Name="OrderSubtotalLabel"
                               Text="£0.00"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor="#333333"
                               VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                </Frame>
                
                <!-- Type Selection -->
                <Label Text="Type" FontSize="14" TextColor="#666666" FontAttributes="Bold"/>
                <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                    <Button x:Name="FixedAmountButton"
                            Text="Fixed (£)"
                            BackgroundColor="#4A90D9"
                            TextColor="White"
                            FontSize="14"
                            HeightRequest="44"
                            CornerRadius="8"
                            Clicked="OnFixedAmountClicked"/>
                    <Button x:Name="PercentageButton"
                            Grid.Column="1"
                            Text="Percent (%)"
                            BackgroundColor="#E8E8E8"
                            TextColor="#555555"
                            FontSize="14"
                            HeightRequest="44"
                            CornerRadius="8"
                            Clicked="OnPercentageClicked"/>
                </Grid>
                
                <!-- Amount Input -->
                <Label Text="Amount" FontSize="14" TextColor="#666666" FontAttributes="Bold"/>
                <Grid ColumnDefinitions="*,50" ColumnSpacing="10">
                    <Frame BackgroundColor="White" BorderColor="#CCCCCC" CornerRadius="8" Padding="0" HasShadow="False">
                        <Entry x:Name="DiscountAmountEntry"
                               Placeholder="0"
                               Keyboard="Numeric"
                               FontSize="18"
                               HeightRequest="44"
                               BackgroundColor="Transparent"
                               TextChanged="OnDiscountAmountChanged"/>
                    </Frame>
                    <Frame Grid.Column="1" BackgroundColor="#F0F0F0" BorderColor="#CCCCCC" CornerRadius="8" Padding="0" HasShadow="False">
                        <Label x:Name="DiscountSymbol"
                               Text="£"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="#4A90D9"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"/>
                    </Frame>
                </Grid>
                
                <!-- Reason Selection -->
                <Label Text="Reason" FontSize="14" TextColor="#666666" FontAttributes="Bold"/>
                <FlexLayout Wrap="Wrap" JustifyContent="Start" AlignItems="Start">
                    <Button x:Name="StaffButton"
                            Text="Staff"
                            BackgroundColor="#F0F0F0"
                            TextColor="#555555"
                            FontSize="13"
                            HeightRequest="38"
                            WidthRequest="100"
                            CornerRadius="6"
                            Margin="0,0,8,8"
                            Clicked="OnReasonClicked"/>
                    <Button x:Name="FamilyButton"
                            Text="Family"
                            BackgroundColor="#F0F0F0"
                            TextColor="#555555"
                            FontSize="13"
                            HeightRequest="38"
                            WidthRequest="100"
                            CornerRadius="6"
                            Margin="0,0,8,8"
                            Clicked="OnReasonClicked"/>
                    <Button x:Name="GoodWillButton"
                            Text="Good Will"
                            BackgroundColor="#F0F0F0"
                            TextColor="#555555"
                            FontSize="13"
                            HeightRequest="38"
                            WidthRequest="100"
                            CornerRadius="6"
                            Margin="0,0,8,8"
                            Clicked="OnReasonClicked"/>
                    <Button x:Name="VoucherButton"
                            Text="Voucher"
                            BackgroundColor="#F0F0F0"
                            TextColor="#555555"
                            FontSize="13"
                            HeightRequest="38"
                            WidthRequest="100"
                            CornerRadius="6"
                            Margin="0,0,8,8"
                            Clicked="OnReasonClicked"/>
                    <Button x:Name="CustomButton"
                            Text="Custom"
                            BackgroundColor="#F0F0F0"
                            TextColor="#555555"
                            FontSize="13"
                            HeightRequest="38"
                            WidthRequest="100"
                            CornerRadius="6"
                            Margin="0,0,8,8"
                            Clicked="OnCustomReasonClicked"/>
                </FlexLayout>
                
                <!-- Custom Reason Input -->
                <Frame x:Name="CustomReasonFrame" IsVisible="False" BackgroundColor="White" BorderColor="#CCCCCC" CornerRadius="8" Padding="0" HasShadow="False">
                    <Entry x:Name="CustomReasonEntry"
                           Placeholder="Enter reason..."
                           FontSize="14"
                           HeightRequest="40"
                           BackgroundColor="Transparent"/>
                </Frame>
                
                <!-- Discount Result -->
                <Frame BackgroundColor="#FFF9E6" BorderColor="#FFD700" CornerRadius="8" Padding="12" HasShadow="False">
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Text="Discount Amount:"
                               FontSize="15"
                               TextColor="#996600"
                               VerticalOptions="Center"/>
                        <Label x:Name="DiscountAmountLabel"
                               Grid.Column="1"
                               Text="£0.00"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="#CC8800"
                               VerticalOptions="Center"/>
                    </Grid>
                </Frame>
                
                <!-- Action Buttons -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                    <Button Text="Remove Discount"
                            BackgroundColor="#FFEEEE"
                            TextColor="#CC4444"
                            FontSize="14"
                            HeightRequest="48"
                            CornerRadius="8"
                            Clicked="OnRemoveDiscountClicked"/>
                    <Button x:Name="ApplyButton"
                            Grid.Column="1"
                            Text="Apply"
                            BackgroundColor="#4CAF50"
                            TextColor="White"
                            FontSize="14"
                            FontAttributes="Bold"
                            HeightRequest="48"
                            CornerRadius="8"
                            Clicked="OnApplyClicked"/>
                </Grid>
                
            </VerticalStackLayout>
        </Frame>
    </Grid>
    
</ContentView>
