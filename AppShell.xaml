<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="POS_in_NET.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:POS_in_NET"
    xmlns:pages="clr-namespace:POS_in_NET.Pages"
    Title="Restaurant POS"
    FlyoutBehavior="Flyout"
    FlyoutWidth="280"
    Shell.NavBarIsVisible="False"
    Shell.FlyoutBackdrop="Transparent">

    <!-- CUSTOM FLYOUT - Complete Control, No Default Spacing -->
    <Shell.FlyoutContent>
        <Grid RowDefinitions="Auto,*,Auto" BackgroundColor="White" RowSpacing="0">
            
            <!-- HEADER - Clean & Elegant -->
            <VerticalStackLayout Grid.Row="0" Spacing="20" Padding="20,32,20,32" BackgroundColor="White">
                <!-- Logo -->
                <Image Source="companylogo.png"
                       WidthRequest="100"
                       HeightRequest="100"
                       Aspect="AspectFit"
                       HorizontalOptions="Center"/>
                
                <!-- Title -->
                <Label Text="OrderWeb POS" 
                       FontFamily="OpenSansBold"
                       FontSize="28"
                       TextColor="#2D3748"
                       HorizontalOptions="Center"/>
                       
                <!-- Subtitle -->
                <Label Text="Restaurant Management" 
                       FontFamily="OpenSansRegular"
                       FontSize="16"
                       TextColor="#718096"
                       HorizontalOptions="Center"
                       Margin="0,-8,0,0"/>
            </VerticalStackLayout>

            <!-- MENU ITEMS - ScrollView for All Items -->
            <ScrollView Grid.Row="1" Padding="0" BackgroundColor="White" Margin="0,8,0,0">
                <VerticalStackLayout Spacing="6" Padding="16,12,16,12">
                    
                    <!-- Dashboard -->
                    <StackLayout x:Name="DashboardMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="dashboard" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="dashboard.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Dashboard" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Live Order -->
                    <StackLayout x:Name="LiveOrderMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="liveorder" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="liveorder.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Live Order" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Restaurant -->
                    <StackLayout x:Name="RestaurantMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="restaurant" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="restaurant.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Restaurant" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Collection -->
                    <StackLayout x:Name="CollectionMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="collection" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="collection.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Collection" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Delivery -->
                    <StackLayout x:Name="DeliveryMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="delivery" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="delivery.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Delivery" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Web Orders -->
                    <StackLayout x:Name="WebOrdersMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="weborders" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="weborders.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Web Orders" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Gift Cards -->
                    <StackLayout x:Name="GiftCardsMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="giftcards" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="giftcards.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Gift Cards" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Loyalty Points -->
                    <StackLayout x:Name="LoyaltyMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="loyalty" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="loyalty.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Loyalty Points" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Reservation -->
                    <StackLayout x:Name="ReservationMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="reservation" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="reservation.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Reservation" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Order History -->
                    <StackLayout x:Name="OrderHistoryMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="orderhistory" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="orderhistory.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Order History" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Report -->
                    <StackLayout x:Name="ReportMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="report" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="report.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Report" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Inventory -->
                    <StackLayout x:Name="InventoryMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="inventory" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="inventory.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Inventory" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Food Menu -->
                    <StackLayout x:Name="FoodMenuMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="foodmenu" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="foodmenu.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Food Menu" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Printers -->
                    <StackLayout x:Name="PrintersMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="printersetup" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="printers.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Printers" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                    <!-- Settings -->
                    <StackLayout x:Name="SettingsMenuItem" BackgroundColor="Transparent" Padding="16,14">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuItemTapped" CommandParameter="settings" />
                        </StackLayout.GestureRecognizers>
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="20">
                            <Image Grid.Column="0" Source="settings.png" WidthRequest="32" HeightRequest="32" 
                                   HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Grid.Column="1" Text="Settings" FontFamily="OpenSansBold" 
                                   FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>

                </VerticalStackLayout>
            </ScrollView>

            <!-- FOOTER - Update All Button -->
            <VerticalStackLayout Grid.Row="2" Padding="14,12,14,14" BackgroundColor="White">
                <Button Text="Update All"
                        FontFamily="OpenSansSemibold"
                        FontSize="15"
                        TextColor="White"
                        CornerRadius="11"
                        HeightRequest="46"
                        BackgroundColor="#6366F1"
                        Clicked="OnSyncDatabaseClicked" />
            </VerticalStackLayout>
            
        </Grid>
    </Shell.FlyoutContent>

    <!-- Login Page (Flyout Disabled) -->
    <ShellContent
        ContentTemplate="{DataTemplate pages:LoginPage}"
        Route="login"
        Shell.FlyoutBehavior="Disabled"
        Shell.TitleView="{x:Null}" />

    <!-- Main App with Flyout Menu -->
    <FlyoutItem Title="Dashboard" FlyoutIcon="ðŸ“Š">
        <ShellContent
            Title="Dashboard" 
            ContentTemplate="{DataTemplate pages:DashboardPage}"
            Route="dashboard"
            Shell.NavBarIsVisible="False" />
    </FlyoutItem>

    <FlyoutItem Title="Restaurant" FlyoutIcon="ðŸª">
        <ShellContent
            Title="Restaurant Overview"
            ContentTemplate="{DataTemplate pages:RestaurantPage}"
            Route="restaurant"
            Shell.NavBarIsVisible="False" />
    </FlyoutItem>
    
    <!-- Hidden Restaurant Sub-Pages (not in flyout menu) -->
    <ShellContent
        Title="Visual Table Layout"
        ContentTemplate="{DataTemplate pages:VisualTablePage}"
        Route="visuallayout"
        Shell.NavBarIsVisible="False"
        FlyoutItemIsVisible="False" />
    
    <ShellContent
        Title="Floor Management"
        ContentTemplate="{DataTemplate pages:FloorPage}"
        Route="floor"
        Shell.NavBarIsVisible="False"
        FlyoutItemIsVisible="False" />
    
    <ShellContent
        Title="Table Management"
        ContentTemplate="{DataTemplate pages:TablePage}"
        Route="table"
        Shell.NavBarIsVisible="False"
        FlyoutItemIsVisible="False" />

    <FlyoutItem Title="Food Menu" FlyoutIcon="ðŸ½ï¸">
        <ShellContent
            Title="Food Menu Management"
            ContentTemplate="{DataTemplate pages:FoodMenuManagement}"
            Route="foodmenu"
            Shell.NavBarIsVisible="False" />
    </FlyoutItem>

    <FlyoutItem Title="Web Orders" FlyoutIcon="ðŸŒ">
        <ShellContent
            Title="Web Orders from OrderWeb.net"
            ContentTemplate="{DataTemplate pages:WebOrdersPage}"
            Route="weborders"
            Shell.NavBarIsVisible="False" />
    </FlyoutItem>

    <FlyoutItem Title="Settings" FlyoutIcon="âš™ï¸">
        <ShellContent
            Title="Settings"
            ContentTemplate="{DataTemplate pages:UnifiedSettingsPage}"
            Route="settings"
            Shell.NavBarIsVisible="False" />
    </FlyoutItem>

    <!-- Hidden routes for tab navigation -->
    <ShellContent
        ContentTemplate="{DataTemplate pages:LiveOrderPage}"
        Route="liveorder"
        Shell.NavBarIsVisible="False"
        Shell.FlyoutItemIsVisible="False" />

    <ShellContent
        ContentTemplate="{DataTemplate pages:OrderHistoryPage}"
        Route="orderhistory"
        Shell.NavBarIsVisible="False"
        Shell.FlyoutItemIsVisible="False" />

    <FlyoutItem Title="Gift Cards" FlyoutIcon="ðŸ’³">
        <ShellContent
            Title="Gift Card Management"
            ContentTemplate="{DataTemplate pages:GiftCardPage}"
            Route="giftcards"
            Shell.NavBarIsVisible="False" />
    </FlyoutItem>

    <FlyoutItem Title="Loyalty Points" FlyoutIcon="ðŸ’Ž">
        <ShellContent
            Title="Customer Loyalty &amp; Gift Cards"
            ContentTemplate="{DataTemplate pages:LoyaltyPointsPage}"
            Route="loyalty"
            Shell.NavBarIsVisible="False" />
    </FlyoutItem>

    <FlyoutItem Title="Printer Setup" FlyoutIcon="ðŸ–¨ï¸">
        <ShellContent
            Title="Printer Setup"
            ContentTemplate="{DataTemplate pages:PrinterSetupPage}"
            Route="printersetup"
            Shell.NavBarIsVisible="False" />
    </FlyoutItem>

</Shell>
